Import('srcs')
Import('config')
Import('env')

config.append_if_config(srcs, 'common/binfmt.c', "CONFIG_BINFMT")
config.append_if_config(srcs, 'common/hush.c',   "CONFIG_SHELL_HUSH")
config.append_if_config(srcs, 'common/parser.c', "CONFIG_SHELL_SIMPLE")
config.append_if_config(srcs, 'common/date.c',   "CONFIG_GREGORIAN_CALENDER")
config.append_if_config(srcs, 'common/kallsyms.c', "CONFIG_KALLSYMS")
config.append_if_config(srcs, 'common/environment.c', "CONFIG_ENV_HANDLING")
config.append_if_config(srcs, 'common/complete.c', "CONFIG_AUTO_COMPLETE")
config.append_if_config(srcs, 'common/poller.c', "CONFIG_POLLER")
config.append_if_config(srcs, 'common/block.c',  "CONFIG_BLOCK")
config.append_if_config(srcs, 'common/partitions.c', "CONFIG_PARTITION_DISK")

config.append_if_config(srcs, 'common/s_record.c', "CONFIG_CMD_LOADS")
config.append_if_config(srcs, 'common/oftree.c',   "CONFIG_OFTREE")

srcs.append('common/memory.c')
config.append_if_config(srcs, 'common/dlmalloc.c', "CONFIG_MALLOC_DLMALLOC")
config.append_if_config(srcs, 'common/tlsf_malloc.c', "CONFIG_MALLOC_TLSF")
config.append_if_config(srcs, 'common/tlsf.c',     "CONFIG_MALLOC_TLSF")
config.append_if_config(srcs, 'common/dummy_malloc.c', "CONFIG_MALLOC_DUMMY")
srcs.append('common/clock.c')
config.append_if_config(srcs, 'common/version.c',  "CONFIG_BANNER")
config.append_if_config(srcs, 'common/command.c',  "CONFIG_COMMAND_SUPPORT")
config.append_if_config(srcs, 'common/console.c',  "CONFIG_CONSOLE_FULL")
config.append_if_config(srcs, 'common/console_simple.c', "CONFIG_CONSOLE_SIMPLE")
config.append_if_config(srcs, 'common/digest.c',   "CONFIG_DIGEST")
config.append_if_config(srcs, 'common/env.c',      "CONFIG_ENVIRONMENT_VARIABLES")
config.append_if_config(srcs, 'common/image.c',    "CONFIG_UIMAGE")
config.append_if_config(srcs, 'common/uimage.c',   "CONFIG_UIMAGE")
srcs.append('common/startup.c')
srcs.append('common/misc.c')
srcs.append('common/memsize.c')
config.append_if_config(srcs, 'common/globalvar.c', "CONFIG_GLOBALVAR")
config.append_if_config(srcs, 'common/reset_source.c', "CONFIG_RESET_SOURCE")
config.append_if_config(srcs, 'common/filetype.c', "CONFIG_FILETYPE")
srcs.append('common/resource.c')
config.append_if_config(srcs, 'common/menu.c',    "CONFIG_MENU")
config.append_if_config(srcs, 'common/password.c', "CONFIG_PASSWORD")
config.append_if_config(srcs, 'common/module.c',  "CONFIG_MODULES")
config.append_if_config(srcs, 'common/bootargs.c', "CONFIG_FLEXIBLE_BOOTARGS")
