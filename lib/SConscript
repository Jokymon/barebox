Import('srcs')
Import('config')
Import('env')

srcs.append('lib/ctype.c')
srcs.append('lib/rbtree.c')
srcs.append('lib/display_options.c')
srcs.append('lib/string.c')
srcs.append('lib/vsprintf.c')
srcs.append('lib/div64.c')
srcs.append('lib/misc.c')
config.append_if_config(srcs, 'lib/parameter.c',            "CONFIG_PARAMETER")
srcs.append('lib/xfuncs.c')
srcs.append('lib/getopt.c')
srcs.append('lib/readkey.c')
srcs.append('lib/kfifo.c')
srcs.append('lib/libbb.c')
srcs.append('lib/libgen.c')
srcs.append('lib/stringlist.c')
srcs.append('lib/recursive_action.c')
srcs.append('lib/make_directory.c')
config.append_if_config(srcs, 'lib/decompress_bunzip2.c',   "CONFIG_BZLIB")
config.append_if_config(srcs, 'lib/decompress_inflate.c',   "CONFIG_ZLIB")
config.append_if_config(srcs, 'lib/zlib_inflate',           "CONFIG_ZLIB")
config.append_if_config(srcs, 'lib/readline.c',             "CONFIG_CMDLINE_EDITING")
config.append_if_config(srcs, 'lib/readline_simple.c',      "CONFIG_SIMPLE_READLINE")
config.append_if_config(srcs, 'lib/fnmatch.c',              "CONFIG_GLOB")
config.append_if_config(srcs, 'lib/find_next_bit.c',        "CONFIG_GENERIC_FIND_NEXT_BIT")
srcs.append('lib/glob.c')
srcs.append('lib/notifier.c')
srcs.append('lib/copy_file.c')
srcs.append('lib/random.c')

SConscript(dirs=['lzo'], exports='env srcs config')

srcs.append('lib/show_progress.c')
config.append_if_config(srcs, 'lib/decompress_unlzo.c',     "CONFIG_LZO_DECOMPRESS")
config.append_if_config(srcs, 'lib/process_escape_sequence.c', "CONFIG_PROCESS_ESCAPE_SEQUENCE")
config.append_if_config(srcs, 'lib/fdt',                    "CONFIG_FDT")
config.append_if_config(srcs, 'lib/uncompress.c',           "CONFIG_UNCOMPRESS")
config.append_if_config(srcs, 'lib/bch.c',                  "CONFIG_BCH")
config.append_if_config(srcs, 'lib/bitrev.c',               "CONFIG_BITREV")
config.append_if_config(srcs, 'lib/qsort.c',                "CONFIG_QSORT")
